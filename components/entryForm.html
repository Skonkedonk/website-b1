<div>
    <!-- Form Modal -->
    <button onclick="addEntry()">Open Form</button>

    <div id="formModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeForm()">&times;</span>
            <form id="entryForm">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" required>

                <label for="category">Category:</label>
                <select id="category" name="category" required>
                    <option value="">Choose a category</option>
                    <option value="Category1">Books</option>
                    <option value="Category2">Music</option>
                    <option value="Category3">Computer</option>
                    <option value="Category4">Tabletop</option>
                </select>

                <label for="description">Description:</label>
                <textarea id="description" name="description" rows="4" required></textarea>

                <label for="rating">Rating:</label>
                <select id="rating" name="rating" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <label for="image">Upload Image:</label>
                <input type="file" id="image" name="image" accept="image/*">

                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        console.log('DOM fully loaded and parsed');

        const form = document.getElementById('entryForm');
        console.log('Form:', form);

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            // Log the entire form object
            console.log('Form object:', form);

            // Directly log and access form elements using getElementById
            const titleInput = document.getElementById('title');
            const categoryInput = document.getElementById('category');
            const descriptionInput = document.getElementById('description');
            const ratingInput = document.getElementById('rating');
            const imageInput = document.getElementById('image');

            // Log the elements to check if they exist
            console.log('Title input:', titleInput);
            console.log('Category input:', categoryInput);
            console.log('Description input:', descriptionInput);
            console.log('Rating input:', ratingInput);
            console.log('Image input:', imageInput);

            // Check if any of the elements are undefined
            if (!titleInput) {
                console.error('Title not found');
                return;
            }
            if (!categoryInput) {
                console.error('Category not found');
                return;
            }
            if (!descriptionInput) {
                console.error('Description not found');
                return;
            }
            if (!ratingInput) {
                console.error('Rating not found');
                return;
            }
            if (!imageInput) {
                console.error('Image not found');
                return;
            }

            const title = titleInput.value || '';
            const description = descriptionInput.value || '';
            const category = categoryInput.value || '';
            const rating = parseInt(ratingInput.value) || 0;
            const file = imageInput.files[0] || null;

            try {
                await uploadFile(title, description, category, rating, file);
                form.reset();
                renderEntries();
            } catch (error) {
                console.error('Error in form submission:', error);
            }
        });

    });
</script>
