<div>
    <!-- Form Modal -->
    <button onclick="addEntry()">Open Form</button>

    <div id="formModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeForm()">&times;</span>
            <form id="entryForm">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" required>

                <label for="category">Category:</label>
                <select id="category" name="category" required>
                    <option value="">Choose a category</option>
                    <option value="Category1">Books</option>
                    <option value="Category2">Music</option>
                    <option value="Category3">Computer</option>
                    <option value="Category4">Tabletop</option>
                </select>

                <label for="description">Description:</label>
                <textarea id="description" name="description" rows="4" required></textarea>

                <label for="rating">Rating:</label>
                <select id="rating" name="rating" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <label for="image">Upload Image:</label>
                <input type="file" id="image" name="image" accept="image/*">

                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
</div>

<script>
    console.log('Script in entryForm.html loaded');

    function addEntry() {
        console.log('Opening form modal');
        document.getElementById('formModal').style.display = 'block';
    }

    function closeForm() {
        console.log('Closing form modal');
        document.getElementById('formModal').style.display = 'none';
    }

    // Attach the event listener directly
    const form = document.getElementById('entryForm');
    if (form) {
        console.log('Form found:', form); // Confirm form is found

        // Log the elements directly
        console.log('Title field:', form.title);
        console.log('Category field:', form.category);
        console.log('Description field:', form.description);
        console.log('Rating field:', form.rating);
        console.log('Image field:', form.image);

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            console.log('Form submitted');  // Log to ensure event is triggered

            // Now that we've confirmed the elements exist, access their values
            const title = form.title ? form.title.value : '';
            const description = form.description ? form.description.value : '';
            const category = form.category ? form.category.value : '';
            const rating = form.rating ? parseInt(form.rating.value) : 0;
            const file = form.image ? form.image.files[0] : null;

            // Log form data to verify it's captured correctly
            console.log('Form data:', { title, description, category, rating, file });

            try {
                await uploadFile(title, description, category, rating, file);
                form.reset();
                renderEntries();
            } catch (error) {
                console.error('Error in form submission:', error);
            }
        });

        console.log('Form submit event listener attached');
    } else {
        console.error('Form not found');
    }
</script>
